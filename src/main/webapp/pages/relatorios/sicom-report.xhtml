<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">
    <ui:composition template="/templates/layout_base.xhtml">
        <ui:define name="content">
            <div class="reports bkg-gray">
                <h:form id="report">

                    <div>
                        <div style="width: 400px" 
                             id="name-field"
                             class="mdl-textfield mdl-js-textfield mdl-textfield--expandable
                             mdl-textfield--floating-label">
                            <label class="mdl-button mdl-js-button mdl-button--icon" for="search-name">
                                <i class="material-icons">search</i>
                            </label>
                            <div class="mdl-textfield__expandable-holder">
                                <input class="mdl-textfield__input" type="text" id="search-name">
                                    <f:ajax event="keypress" execute="@this" listener="#"/>
                                </input>
                                <label class="mdl-textfield__label" for="search-name">
                                    Busca por nome completo
                                </label>
                            </div>
                        </div>
                        <div class="mdl-tooltip mdl-tooltip--large" for="name-field">
                            Print
                        </div>
                        <div style="width: 200px" 
                             id="cpf-field"
                             class="mdl-textfield mdl-js-textfield mdl-textfield--expandable
                             mdl-textfield--floating-label">
                            <label class="mdl-button mdl-js-button mdl-button--icon" for="search-cpf">
                                <i class="material-icons">search</i>
                            </label>
                            <div class="mdl-textfield__expandable-holder">
                                <input class="mdl-textfield__input" type="text" pattern="[0-9]*" id="search-cpf">
                                    <f:ajax event="keypress" execute="@this" listener="#"/>
                                </input>
                                <label class="mdl-textfield__label" for="search-cpf">
                                    Busca por cpf
                                </label>
                                <span class="mdl-textfield__error">Digits only</span>
                            </div>
                        </div>
                        <div class="mdl-tooltip mdl-tooltip--large" for="cpf-field">
                            Print
                        </div>
                    </div>
                    <div>
                        <h:dataTable value="#{subscriberController.subscribers}" 
                                     columnClasses="report-column1, report-column2, report-column3"
                                     headerClass="report-column3"
                                     class="mdl-data-table mdl-js-data-table mdl-shadow--2dp report-table"
                                     var="sub">
                            <h:column class="mdl-data-table__cell--non-numeric">
                                <f:facet name="header" 
                                         class="mdl-data-table__cell--non-numeric">
                                    <h:outputLabel value="#{msgs['uc.subscriber.name']}"
                                                   class="roboto medium s16 dark-blue"/>
                                </f:facet>
                                <h:outputText value="#{sub.fullName}" 
                                              class="roboto normal s16 dark-blue"/>
                            </h:column>

                            <h:column class="mdl-data-table__cell--non-numeric">
                                <f:facet name="header" class="mdl-data-table__cell--non-numeric">
                                    <h:outputLabel value="#{msgs['uc.subscriber.cpf']}"
                                                   class="roboto medium s16 dark-blue"/>
                                </f:facet>
                                <h:outputText id="cpf" 
                                              value="#{sub.cpf}"
                                              class="roboto normal s16 dark-blue">
                                    <f:converter converterId="cpfConverter" for="cpf"/>
                                </h:outputText>
                            </h:column>

                            <h:column class="mdl-data-table__cell--non-numeric">
                                <f:facet name="header" class="mdl-data-table__cell--non-numeric">
                                    <h:outputLabel value="#{msgs['uc.subscriber.presence']}"
                                                   class="roboto medium s16 dark-blue"/>
                                </f:facet>
                                <p:selectBooleanCheckbox value="#{sub.event}">
                                    <p:ajax update=":report" listener="#{subscriberController.presence(sub)}" />
                                </p:selectBooleanCheckbox>
                            </h:column>
                        </h:dataTable>
                    </div>
                </h:form>
            </div>
        </ui:define>
    </ui:composition>
</html>
